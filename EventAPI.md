# Event API Specifications
These are events generated on the Kafka Topics by ACM.   The evets generated by the Common Inventory infrastructure will be defined in due course (they will be distinct and different from these)

## Topics
The following Kafka topics are used
- spec
- event
- status

_if we change the kafka topic names: example change `spec` to `acm-spec` does that break backward compatibility or cause issues during upgrade_

## Event Structure

The events are formatted as per [CloudEvents](https://github.com/cloudevents/spec/blob/main/cloudevents/spec.md) Specifications. Therefore the message envelopes are common as specified by the CloudEvent Specs. It is encoded in JSON format.

A simple `hello world` message would look like.  - 
```
{
    "specversion" : "1.0",
    "type" : "com.event",
    "source" : "source",
    "id" : "A234-1234-1234",
    "time" : "2018-04-05T17:31:00Z",
    "datacontenttype" : "application/json",
    "data" : {
        "message" : "Hello World!"
    }
}
```

The `data` field which carries the real message payload is described in the sections below.

|Field|datatype|Cloud Event Envelope|Event Payload|Note|
|----|----|----|----|----|
|id|string|Yes||kube event-id; for non-kube, it needs to be generated|
|source|string|Yes||ACM or ACS etc. Do we need a list of sources? Does it need to be namespaced (acm.hub1 etc)|
|spec_version|string|Yes||Is this the Cloud Event version?|
|type|string|Yes||one of the above. Do we need a list of types?|
|date-time||||Based on GMT; |
|data|any||Yes|This is the real payload and we will describe this payload under each subsection below|
|kafkamessagekey||||Being added by GH Agent for ease of consumption|
|kafkapartition||||Being added by GH Agent for ease of consumption|
|extversion||||Being added by GH Agent for ease of consumption|,
|kafkaoffset||||Being added by GH Agent for ease of consumption|
|kafkatopic||||Being added by GH Agent for ease of consumption|

### data field for each topic

#### Topic spec

#### Topic status

#### Topic event


